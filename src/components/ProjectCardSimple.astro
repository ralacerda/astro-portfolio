---
import { Picture } from "@astrojs/image/components";
import { getIconFromArray } from "@/composables/getIcon";
import type { Tech } from "@/composables/getIcon";

interface Props {
  title: string;
  link?: string;
  linkReadMore?: string;
  imgSrc: ImageMetadata;
  techList: Tech[];
}

const { title, link, linkReadMore, imgSrc, techList } = Astro.props;
---

<div class="project">
  <h3 class="project__title">
    {title}
  </h3>
  <div class="project__flex">
    <div class="project__text">
      <slot />
      <p>
        <a href={linkReadMore}> Leia mais sobre o projeto</a>
      </p>
      <div class="project__icons">
        {
          getIconFromArray(techList).map((icon) => {
            return <Fragment set:html={icon} />;
          })
        }
      </div>
    </div>
    <div class="project__screenshot-background">
      <a href={link} target="_blank">
        <Picture
          alt={`Screenshot do projeto ${title}`}
          src={imgSrc}
          widths={[400, 600]}
          sizes="(max-width: 600px) 400px, 600px"
          ratio="16:9"
          format="webp"
          class="project__screenshot"
        />
      </a>
    </div>
  </div>
</div>

<style lang="scss">
  .project {
    margin-top: var(--space-m);
  }

  .project + .project {
    margin-top: var(--space-2xl);
  }

  .project__flex {
    margin-top: var(--space-s);
    display: flex;
    align-items: start;
    flex-wrap: wrap-reverse;
    row-gap: var(--space-m);
    column-gap: var(--space-l);
  }

  .project__title {
    font-size: var(--step-2);
  }

  .project__icons {
    display: flex;
    column-gap: var(--space-m);
    font-size: var(--step-3);
    color: var(--bg-details);
    margin-top: var(--space-m);
  }

  .project__text {
    flex: 1 1 400px;
    max-width: 70ch;
  }

  .project__screenshot {
    height: auto;
    transition: box-shadow 200ms, transform 200ms;
    border-radius: 3px;
    @include shadow;

    &:hover {
      transform: translate(-0.5rem, -0.5rem);
    }
  }

  .project__screenshot-background {
    border-radius: 4px;
    background-color: var(--danger);
  }
</style>
